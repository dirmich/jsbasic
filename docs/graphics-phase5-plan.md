# Graphics System Phase 5 ê³„íšì„œ

## ğŸ“… ê³„íš ì¼ì
2025-10-04

## ğŸ¯ Phase 5 ëª©í‘œ

### ì™„ë£Œëœ Phase ìš”ì•½
- âœ… **Phase 1**: í•µì‹¬ ì¸í”„ë¼ (GraphicsEngine, DisplayManager, PixelBuffer, ColorManager)
- âœ… **Phase 2**: Interpreter í†µí•© ë° í…ŒìŠ¤íŠ¸
- âœ… **Phase 3**: Canvas ë Œë”ë§ ë° ì‹¤ì‹œê°„ í™”ë©´ ì¶œë ¥
- âœ… **Phase 4**: POINT í•¨ìˆ˜ ë° CLS ëª…ë ¹ì–´ êµ¬í˜„

### Phase 5 í•µì‹¬ ëª©í‘œ
**ì„±ëŠ¥ ìµœì í™” ë° ê³ ê¸‰ ê·¸ë˜í”½ ê¸°ëŠ¥ êµ¬í˜„**

## ğŸš€ ìš°ì„ ìˆœìœ„ë³„ ì‘ì—… ê³„íš

### ìš°ì„ ìˆœìœ„ 1: ì„±ëŠ¥ ìµœì í™” (í•„ìˆ˜)

#### 1.1 DirtyRectTracker í™œì„±í™”
**í˜„ì¬ ìƒíƒœ**: êµ¬í˜„ë˜ì–´ ìˆìœ¼ë‚˜ ë¯¸ì‚¬ìš©
**ì‘ì—… ë‚´ìš©**:
- DisplayManagerì—ì„œ DirtyRectTracker í†µí•©
- ë³€ê²½ëœ ì˜ì—­ë§Œ ì„ íƒì  ë Œë”ë§
- ì „ì²´ í™”ë©´ ë Œë”ë§ â†’ ë¶€ë¶„ ì˜ì—­ ë Œë”ë§ ì „í™˜

**ì˜ˆìƒ ì„±ëŠ¥ í–¥ìƒ**:
- CPU ì‚¬ìš©ëŸ‰ 50-80% ê°ì†Œ
- ë°°í„°ë¦¬ ìˆ˜ëª… ê°œì„  (ëª¨ë°”ì¼)
- ë³µì¡í•œ ì• ë‹ˆë©”ì´ì…˜ ì§€ì›

#### 1.2 requestAnimationFrame ì „í™˜
**í˜„ì¬ ìƒíƒœ**: setInterval ì‚¬ìš© (16ms)
**ì‘ì—… ë‚´ìš©**:
- requestAnimationFrame ê¸°ë°˜ ë Œë”ë§ ë£¨í”„
- ë¸Œë¼ìš°ì € ìµœì í™” í™œìš©
- VSync ë™ê¸°í™”

**ì˜ˆìƒ ì„±ëŠ¥ í–¥ìƒ**:
- ë” ë¶€ë“œëŸ¬ìš´ 60 FPS
- ë°°í„°ë¦¬ ì ˆì•½ (ë°±ê·¸ë¼ìš´ë“œ ì¼ì‹œì •ì§€)
- í”„ë ˆì„ ë“œë¡­ ê°ì†Œ

#### 1.3 ImageData ì¬ì‚¬ìš©
**í˜„ì¬ ìƒíƒœ**: ë§¤ í”„ë ˆì„ ìƒˆë¡œ ìƒì„±
**ì‘ì—… ë‚´ìš©**:
- ImageData ê°ì²´ ì¬ì‚¬ìš© í’€ êµ¬í˜„
- ë©”ëª¨ë¦¬ í• ë‹¹ ìµœì†Œí™”
- GC ì••ë ¥ ê°ì†Œ

**ì˜ˆìƒ ì„±ëŠ¥ í–¥ìƒ**:
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ 30-50% ê°ì†Œ
- GC ì¼ì‹œì •ì§€ ê°ì†Œ
- í”„ë ˆì„ ì¼ê´€ì„± í–¥ìƒ

### ìš°ì„ ìˆœìœ„ 2: ì¶”ê°€ ê·¸ë˜í”½ ê¸°ëŠ¥

#### 2.1 GET/PUT ëª…ë ¹ì–´ êµ¬í˜„
**BASIC ë¬¸ë²•**:
```basic
GET (x1, y1)-(x2, y2), array_name
PUT (x, y), array_name [, action]
```

**êµ¬í˜„ ê³„íš**:
- í™”ë©´ ì˜ì—­ì„ ë°°ì—´ë¡œ ì €ì¥
- ì €ì¥ëœ ì˜ì—­ì„ ë‹¤ì‹œ í™”ë©´ì— ì¶œë ¥
- ì•¡ì…˜ ëª¨ë“œ: PSET, PRESET, AND, OR, XOR

**í™œìš© ì˜ˆì‹œ**:
- ìŠ¤í”„ë¼ì´íŠ¸ ì• ë‹ˆë©”ì´ì…˜
- í™”ë©´ ë²„í¼ ë³µì‚¬/ì´ë™
- ë”ë¸” ë²„í¼ë§ êµ¬í˜„

#### 2.2 DRAW ëª…ë ¹ì–´ êµ¬í˜„
**BASIC ë¬¸ë²•**:
```basic
DRAW "string_command"
```

**ëª…ë ¹ì–´ ë¬¸ìì—´**:
- `U/D/L/R`: ìœ„/ì•„ë˜/ì™¼ìª½/ì˜¤ë¥¸ìª½ ì´ë™
- `E/F/G/H`: ëŒ€ê°ì„  ì´ë™
- `Mn`: ì´ë™ ëª¨ë“œ ì„¤ì •
- `Bn`: ë°°ê²½ìƒ‰ ì„¤ì •
- `Cn`: ìƒ‰ìƒ ì„¤ì •

**êµ¬í˜„ ê³„íš**:
- DRAW ë¬¸ìì—´ íŒŒì„œ êµ¬í˜„
- ë³µì¡í•œ ë„í˜• ê·¸ë¦¬ê¸° ì§€ì›
- ì• ë‹ˆë©”ì´ì…˜ ê²½ë¡œ ì •ì˜

### ìš°ì„ ìˆœìœ„ 3: UI/UX ê°œì„ 

#### 3.1 ê·¸ë˜í”½/í…ìŠ¤íŠ¸ ë™ì‹œ í‘œì‹œ
**í˜„ì¬ ìƒíƒœ**: ì „í™˜ ëª¨ë“œë§Œ ì§€ì›
**ê°œì„  ê³„íš**:
- ë¶„í•  í™”ë©´ ëª¨ë“œ ì§€ì›
- ê·¸ë˜í”½ ìœ„ í…ìŠ¤íŠ¸ ì˜¤ë²„ë ˆì´
- ì‚¬ìš©ì ì„¤ì • ë ˆì´ì•„ì›ƒ

#### 3.2 í™•ëŒ€/ì¶•ì†Œ ê¸°ëŠ¥
**êµ¬í˜„ ê³„íš**:
- 1ë°°, 2ë°°, 3ë°°, 4ë°° í™•ëŒ€ ì§€ì›
- í”½ì…€ í¼í™íŠ¸ ìŠ¤ì¼€ì¼ë§
- ë§ˆìš°ìŠ¤ íœ /í„°ì¹˜ ì œìŠ¤ì²˜ ì§€ì›

#### 3.3 ê·¸ë¦¬ë“œ ì˜¤ë²„ë ˆì´
**êµ¬í˜„ ê³„íš**:
- í”½ì…€ ê·¸ë¦¬ë“œ í‘œì‹œ ì˜µì…˜
- ì¢Œí‘œ í‘œì‹œ
- ìƒ‰ìƒ íŒ”ë ˆíŠ¸ í‘œì‹œ

### ìš°ì„ ìˆœìœ„ 4: ì˜ˆì œ ë° ë¬¸ì„œ

#### 4.1 ê·¸ë˜í”½ ë°ëª¨ í”„ë¡œê·¸ë¨
**ì‘ì„±í•  ì˜ˆì œ**:
1. ìƒ‰ìƒ íŒ”ë ˆíŠ¸ í…ŒìŠ¤íŠ¸
2. ë„í˜• ê·¸ë¦¬ê¸° ë°ëª¨
3. ì• ë‹ˆë©”ì´ì…˜ ë°ëª¨
4. íŒ¨í„´ ì±„ìš°ê¸° ë°ëª¨

#### 4.2 ê²Œì„ ì˜ˆì œ
**êµ¬í˜„í•  ê²Œì„**:
1. **Pong** - ê¸°ì´ˆ ê²Œì„ ì˜ˆì œ
2. **Snake** - ì¤‘ê¸‰ ì˜ˆì œ
3. **Breakout** - ê³ ê¸‰ ì˜ˆì œ
4. **Space Invaders** - ì¢…í•© ì˜ˆì œ

#### 4.3 API ë¬¸ì„œ ì‘ì„±
**ë¬¸ì„œí™” ë‚´ìš©**:
- ê·¸ë˜í”½ ëª…ë ¹ì–´ ë ˆí¼ëŸ°ìŠ¤
- ì„±ëŠ¥ ìµœì í™” ê°€ì´ë“œ
- ê²Œì„ ê°œë°œ íŠœí† ë¦¬ì–¼
- íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ê°€ì´ë“œ

## ğŸ“Š êµ¬í˜„ ì¼ì •

### Week 1: ì„±ëŠ¥ ìµœì í™”
- Day 1-2: DirtyRectTracker í†µí•© ë° í…ŒìŠ¤íŠ¸
- Day 3-4: requestAnimationFrame ì „í™˜
- Day 5: ImageData ì¬ì‚¬ìš© êµ¬í˜„
- Day 6-7: ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬ ë° íŠœë‹

### Week 2: ê³ ê¸‰ ê¸°ëŠ¥
- Day 1-3: GET/PUT ëª…ë ¹ì–´ êµ¬í˜„
- Day 4-5: DRAW ëª…ë ¹ì–´ êµ¬í˜„
- Day 6-7: í†µí•© í…ŒìŠ¤íŠ¸

### Week 3: UI/UX ê°œì„ 
- Day 1-2: ë™ì‹œ í‘œì‹œ ëª¨ë“œ
- Day 3-4: í™•ëŒ€/ì¶•ì†Œ ê¸°ëŠ¥
- Day 5-7: ê·¸ë¦¬ë“œ ë° ë””ë²„ê¹… ë„êµ¬

### Week 4: ì˜ˆì œ ë° ë¬¸ì„œ
- Day 1-3: ë°ëª¨ í”„ë¡œê·¸ë¨ ì‘ì„±
- Day 4-5: ê²Œì„ ì˜ˆì œ êµ¬í˜„
- Day 6-7: API ë¬¸ì„œ ì‘ì„± ë° ë¦¬ë·°

## ğŸ¯ ì„±ê³µ ê¸°ì¤€

### ì„±ëŠ¥ ëª©í‘œ
- [ ] 60 FPS ì•ˆì •ì  ìœ ì§€
- [ ] CPU ì‚¬ìš©ëŸ‰ 50% ê°ì†Œ
- [ ] ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ 30% ê°ì†Œ
- [ ] í”„ë ˆì„ ë“œë¡­ 0.1% ë¯¸ë§Œ

### ê¸°ëŠ¥ ëª©í‘œ
- [ ] GET/PUT ëª…ë ¹ì–´ ì™„ì „ êµ¬í˜„
- [ ] DRAW ëª…ë ¹ì–´ ì™„ì „ êµ¬í˜„
- [ ] ë™ì‹œ í‘œì‹œ ëª¨ë“œ êµ¬í˜„
- [ ] í™•ëŒ€/ì¶•ì†Œ ê¸°ëŠ¥ êµ¬í˜„

### í’ˆì§ˆ ëª©í‘œ
- [ ] íƒ€ì… ì˜¤ë¥˜ 0ê°œ ìœ ì§€
- [ ] í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ 80% ì´ìƒ
- [ ] ëª¨ë“  ì£¼ìš” ë¸Œë¼ìš°ì € í˜¸í™˜
- [ ] ëª¨ë°”ì¼ ìµœì í™” ì™„ë£Œ

### ë¬¸ì„œí™” ëª©í‘œ
- [ ] API ë ˆí¼ëŸ°ìŠ¤ ì™„ì„±
- [ ] 3ê°œ ì´ìƒ ê²Œì„ ì˜ˆì œ
- [ ] ì„±ëŠ¥ ìµœì í™” ê°€ì´ë“œ
- [ ] íŠ¸ëŸ¬ë¸”ìŠˆíŒ… FAQ

## ğŸ”§ ê¸°ìˆ ì  ê³ ë ¤ì‚¬í•­

### DirtyRectTracker í†µí•©
```typescript
// DisplayManagerì— ì¶”ê°€
private dirtyRectTracker: DirtyRectTracker;

updateDisplay(): void {
  const dirtyRects = this.dirtyRectTracker.getDirtyRects();

  if (dirtyRects.length === 0) return; // ë³€ê²½ ì—†ìŒ

  for (const rect of dirtyRects) {
    this.renderRegion(rect); // ë¶€ë¶„ ë Œë”ë§
  }

  this.dirtyRectTracker.clear();
}
```

### requestAnimationFrame ì „í™˜
```typescript
private animationFrameId: number | null = null;

startGraphicsUpdate(): void {
  const render = () => {
    this.renderGraphics();
    this.animationFrameId = requestAnimationFrame(render);
  };
  this.animationFrameId = requestAnimationFrame(render);
}

stopGraphicsUpdate(): void {
  if (this.animationFrameId !== null) {
    cancelAnimationFrame(this.animationFrameId);
    this.animationFrameId = null;
  }
}
```

### ImageData í’€ë§
```typescript
class ImageDataPool {
  private pool: ImageData[] = [];

  acquire(width: number, height: number): ImageData {
    return this.pool.pop() || new ImageData(width, height);
  }

  release(imageData: ImageData): void {
    this.pool.push(imageData);
  }
}
```

## ğŸš¨ ë¦¬ìŠ¤í¬ ë° ëŒ€ì‘

### ë¦¬ìŠ¤í¬ 1: ì„±ëŠ¥ ìµœì í™” ë³µì¡ë„
**ëŒ€ì‘ì±…**:
- ë‹¨ê³„ë³„ êµ¬í˜„ ë° ë²¤ì¹˜ë§ˆí¬
- ë¡¤ë°± ê°€ëŠ¥í•œ feature flag ì‚¬ìš©
- A/B í…ŒìŠ¤íŠ¸ë¡œ ê²€ì¦

### ë¦¬ìŠ¤í¬ 2: ë¸Œë¼ìš°ì € í˜¸í™˜ì„±
**ëŒ€ì‘ì±…**:
- Polyfill ì¤€ë¹„
- Feature detection
- Graceful degradation

### ë¦¬ìŠ¤í¬ 3: ì¼ì • ì§€ì—°
**ëŒ€ì‘ì±…**:
- MVP ê¸°ëŠ¥ ìš°ì„  êµ¬í˜„
- ì„ íƒì  ê¸°ëŠ¥ ì¶”í›„ ì¶”ê°€
- ë³‘ë ¬ ì‘ì—… ê°€ëŠ¥í•œ í•­ëª© ë¶„ë¦¬

## âœ¨ ê¸°ëŒ€ íš¨ê³¼

### ê°œë°œì ê²½í—˜
- ë” ë¹ ë¥¸ ê·¸ë˜í”½ ë Œë”ë§
- ë” ë§ì€ ê·¸ë˜í”½ ê¸°ëŠ¥
- ë” ë‚˜ì€ ë””ë²„ê¹… ë„êµ¬

### ì‚¬ìš©ì ê²½í—˜
- ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜
- ë³µì¡í•œ ê²Œì„ ì§€ì›
- ëª¨ë°”ì¼ ìµœì í™”

### í”„ë¡œì íŠ¸ ì™„ì„±ë„
- ìƒìš© ìˆ˜ì¤€ì˜ ì„±ëŠ¥
- í’ë¶€í•œ ì˜ˆì œ ë° ë¬¸ì„œ
- ì»¤ë®¤ë‹ˆí‹° ê¸°ì—¬ í™˜ê²½

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„

1. **ì¦‰ì‹œ ì‹œì‘**: DirtyRectTracker í†µí•©
2. **ë‹¤ìŒ ì£¼**: requestAnimationFrame ì „í™˜
3. **2ì£¼ì°¨**: GET/PUT ëª…ë ¹ì–´
4. **3ì£¼ì°¨**: UI/UX ê°œì„ 
5. **4ì£¼ì°¨**: ì˜ˆì œ ë° ë¬¸ì„œ

**Phase 5 ì™„ë£Œ ì‹œ 6502 BASIC ê·¸ë˜í”½ ì‹œìŠ¤í…œì´ ì™„ì „íˆ ì™„ì„±ë©ë‹ˆë‹¤!** ğŸ¨âœ¨
